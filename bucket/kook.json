{
    "autoupdate": {
        "url": "$matchUrl#/dl.7z"
    },
    "checkver": {
        "script": [
            "$script:ver = json_path $page '$.number' -single $true",
            "$script:matchesHashtable = @{'url' = json_path $page '$.url' -single $true}",
            "$script:regexp = $null"
        ],
        "url": "https://www.kookapp.cn/api/v2/updates/latest-version?platform=windows"
    },
    "description": "A useful voice communication tool.",
    "extract_to": "tmp",
    "hash": "79a4c08c1338f228b3913c254c971a004dfa234b9e3c8edf7d3efe2cb03f1437",
    "homepage": "https://www.kookapp.cn",
    "license": {
        "identifier": "Freeware",
        "url": "https://www.kookapp.cn/protocol.html"
    },
    "persist": "User Data",
    "post_install": [
        "Remove-Item \"$dir\\tmp\" -ErrorAction SilentlyContinue -Recurse -Force",
        "if (-not (Test-Path \"$dir\\User Data\\*\") -and (Test-Path \"$env:AppData\\kook\")) {",
        "    info '[Portable Mode]: Copying user data...'",
        "    ensure \"$dir\\User Data\" | Out-Null",
        "    Copy-Item \"$env:AppData\\kook\\*\" \"$dir\\User Data\" -Recurse -Force -ErrorAction SilentlyContinue",
        "}"
    ],
    "pre_install": [
        "Expand-7zipArchive \"$dir\\tmp\\`$1\\SquirrelTemp\\app.7z\" \"$dir\"",
        "Expand-Archive \"$dir\\KOOK-$version-full.nupkg\" \"$dir\""
    ],
    "shortcuts": [
        [
            "lib\\net45\\KOOK.exe",
            "KOOK",
            "--user-data-dir=\"$dir\\User Data\""
        ]
    ],
    "url": "https://dl.kookapp.cn/assets/release/html_pc/kook_1136/Kook_PC_Setup_v0.87.0.0_b2ZmaWNpYWwuc2l0ZS4uLi5wYw==.exe?auth_key=1724300845-4463d7e65bd873d60d74bf323018cc4d-1jmv14z0-1f09a23988c10b6daf4f5ac0fbca2281#/dl.7z",
    "version": "0.87.0"
}
