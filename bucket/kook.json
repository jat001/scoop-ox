{
    "autoupdate": {
        "url": "$matchUrl#/dl.7z"
    },
    "checkver": {
        "script": [
            "$script:ver = json_path $page '$.number' -single $true",
            "$script:matchesHashtable = @{'url' = json_path $page '$.url' -single $true}",
            "$script:regexp = $null"
        ],
        "url": "https://www.kookapp.cn/api/v2/updates/latest-version?platform=windows"
    },
    "description": "A useful voice communication tool.",
    "extract_to": "tmp",
    "hash": "be3851fa72bd715ac332d48925dff62db11c3ed989e39aebf8fe3334c765aba7",
    "homepage": "https://www.kookapp.cn",
    "license": {
        "identifier": "Freeware",
        "url": "https://www.kookapp.cn/protocol.html"
    },
    "persist": "User Data",
    "post_install": [
        "Remove-Item \"$dir\\tmp\" -ErrorAction SilentlyContinue -Recurse -Force",
        "if (-not (Test-Path \"$dir\\User Data\\*\") -and (Test-Path \"$env:AppData\\kook\")) {",
        "    info '[Portable Mode]: Copying user data...'",
        "    ensure \"$dir\\User Data\" | Out-Null",
        "    Copy-Item \"$env:AppData\\kook\\*\" \"$dir\\User Data\" -Recurse -Force -ErrorAction SilentlyContinue",
        "}"
    ],
    "pre_install": [
        "Expand-7zipArchive \"$dir\\tmp\\`$1\\SquirrelTemp\\app.7z\" \"$dir\"",
        "Expand-Archive \"$dir\\KOOK-$version-full.nupkg\" \"$dir\""
    ],
    "shortcuts": [
        [
            "lib\\net45\\KOOK.exe",
            "KOOK",
            "--user-data-dir=\"$dir\\User Data\""
        ]
    ],
    "url": "https://dl.kookapp.cn/assets/release/html_pc/kook_1116/Kook_PC_Setup_v0.86.5.0_b2ZmaWNpYWwuc2l0ZS4uLi5wYw==.exe?auth_key=1723609639-bd628ea53ba4566683f1667efc792f2f-6h56xgz0-cf7b38c8a71cf013081363579e0adc57#/dl.7z",
    "version": "0.86.5"
}
